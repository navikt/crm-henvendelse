<template>
    <!-- Messages Start-->
    <section role="log" class="slds-box slds-scrollable_y" style="height: 30em">
        <template for:each={messages} for:item="message">
            <c-crm-messaging-Message-Container message={message} key={message.Id}></c-crm-messaging-Message-Container>
        </template>
    </section>
    <!-- Messages End-->
    <!-- Reply Box Start-->
    <lightning-record-edit-form object-api-name="Message__c" onsuccess={handlesuccess} onsubmit={handlesubmit}>
        <lightning-layout multiple-rows="true">
            <lightning-layout-item padding="horizontalSmall" size="12">
                <div
                    role="toolbar"
                    class="slds-rich-text-editor__toolbar slds-shrink-none"
                    style="display: block; border-radius: 0"
                >
                    <lightning-layout>
                        <lightning-layout-item size="8">
                            <lightning-layout horizontal-align="start">
                                <lightning-button-group ontoolbaraction={handleToolbarAction}>
                                    <lightning-button-icon-stateful
                                        icon-name="utility:quick_text"
                                        alternative-text="Hurtigtekst"
                                        onclick={showQuickText}
                                    >
                                    </lightning-button-icon-stateful>
                                    <slot name="toolbar"></slot>
                                </lightning-button-group>
                            </lightning-layout>
                        </lightning-layout-item>
                        <lightning-layout-item size="4">
                            <lightning-layout horizontal-align="end">
                                <lightning-record-edit-form record-id={threadid} object-api-name="Thread__c">
                                    <lightning-button
                                        variant="destructive"
                                        label="Avslutt Samtale"
                                        disabled={closedThread}
                                        onclick={closeThread}
                                    >
                                    </lightning-button>
                                </lightning-record-edit-form>
                            </lightning-layout>
                        </lightning-layout-item>
                    </lightning-layout>
                </div>
                <lightning-input-field
                    class="msgText"
                    variant="label-hidden"
                    field-name="CRM_Message_Text__c"
                ></lightning-input-field>
            </lightning-layout-item>
            <br />
            <lightning-layout-item size="12" padding="horizontalSmall">
                <lightning-button
                    type="submit"
                    name="submit"
                    label="Send"
                    disabled={closedThread}
                    variant="brand"
                    style="min-height: 3rem"
                    class="slds-float_right"
                >
                </lightning-button>
            </lightning-layout-item>
        </lightning-layout>
        <!--</div> -->
        <lightning-input-field field-name="CRM_From_User__c" value={userid} class="slds-hide"></lightning-input-field>
    </lightning-record-edit-form>

    <!-- POSSIBLE DISPLAY OF JOURNAL ENTRIES RELATED TO THE THREAD
    <div if:true={journalEntries}>
        <template for:each={journalEntries} for:item="journalEntry"> {journalEntry.CRM_Created_By_Ident__c} </template>
    </div>
        -->

    <!-- Reply Box End-->
</template>
