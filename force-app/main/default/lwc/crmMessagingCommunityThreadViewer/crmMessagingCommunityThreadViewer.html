<template>
    <div class="decorator-wrapper">
        <div class="header" style="text-align: center">
            <h1 class="navds-heading navds-heading--2xlarge">{name}</h1>
        </div>
        <c-community-error-summary
            error-list={errors}
            show-warnings={showWarnings}
            onclickedevent={handleErrorClick}
            class="errorSummary"
        >
        </c-community-error-summary>
        <div class="contentholder">
            <template for:each={messages} for:item="message">
                <c-crm-messaging-Community-Message-Container
                    tabindex="0"
                    message={message}
                    user-contact-id={userContactId}
                    key={message.id}
                ></c-crm-messaging-Community-Message-Container>
            </template>
        </div>
        <div>
            <template if:false={isclosed}>
                <lightning-layout horizontal-align="center">
                    <lightning-layout-item
                        size="12"
                        class="slds-var-p-top_medium slds-var-p-horizontal_medium largePadding"
                    >
                        <lightning-messages></lightning-messages>
                        <lightning-input-field
                            class="msgText slds-hidden"
                            field-name="CRM_Message_Text__c"
                        ></lightning-input-field>
                        <div class="body-wrapper" style="">
                            <div class="example__inner">
                                <div class="flexBox">
                                    <lightning-textarea
                                        data-name="messagearea"
                                        class="messagearea typo-normal"
                                        name="message"
                                        type="text"
                                        label="Skriv her"
                                        variant="label-hidden"
                                        autocomplete="false"
                                        onchange={synchtext}
                                        maxlength="1000"
                                    ></lightning-textarea>
                                    <button
                                        disabled={buttonisdisabled}
                                        type="submit"
                                        class="navds-button navds-button--primary navds-button--medium flex-end"
                                        style="padding: calc(0.475rem - 1px) 2.5rem calc(0.525rem - 1px) 2.5rem"
                                        name="submit"
                                        label="Send"
                                        onclick={createMessage}
                                    >
                                        Send
                                    </button>
                                </div>
                            </div>
                            <template if:true={showopenwarning}>
                                <c-crm-community-alert-stripe
                                    class="alertbox closebox"
                                    type="info"
                                    alerttext={alertopen}
                                ></c-crm-community-alert-stripe>
                            </template>
                        </div>

                        <lightning-input-field
                            field-name="CRM_From_Contact__c"
                            value={userContactId}
                            class="slds-hidden"
                        ></lightning-input-field>
                        <lightning-input-field field-name="CRM_Thread__c" value={recordId} class="slds-hidden">
                        </lightning-input-field>
                    </lightning-layout-item>
                </lightning-layout>
            </template>
        </div>
        <template if:true={isclosed}>
            <div class="infocontainer slds-var-p-top_medium slds-var-p-horizontal_medium largePadding">
                <c-crm-community-alert-stripe
                    class="alertbox"
                    type="info"
                    alerttext={alerttext}
                ></c-crm-community-alert-stripe></div
        ></template></div
></template>
